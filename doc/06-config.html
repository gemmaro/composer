<!DOCTYPE HTML>
<html lang="ja" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>構成 - Composer</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Composer</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/gemmaro/composer" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="構成"><a class="header" href="#構成">構成</a></h1>
<p>本章では<code>composer.json</code>の<a href="04-schema.html">スキーマ</a>の<code>config</code>節について記述していきます。</p>
<h2 id="process-timeout"><a class="header" href="#process-timeout">process-timeout</a></h2>
<p>プロセス実行の制限時間で、秒単位です。
既定では300（5分）です。
<code>git clone</code>のような時間の掛かるプロセスは、Composerによりプロセスの異常終了が推定されるまで、実行できます。
接続が遅い場合やベンダーが大きい場合は、これを増やす必要があるかもしれません。</p>
<p>例：</p>
<pre><code class="language-json">{
    "config": {
        "process-timeout": 900
    }
}
</code></pre>
<h3 id="個々のスクリプトのコマンドで制限時間を無効にする"><a class="header" href="#個々のスクリプトのコマンドで制限時間を無効にする">個々のスクリプトのコマンドで制限時間を無効にする</a></h3>
<p><code>scripts</code>以下の独自コマンドでプロセスの制限時間を無効にするには、静的ヘルパーが使えます。</p>
<pre><code class="language-json">{
    "scripts": {
        "test": [
            "Composer\\Config::disableProcessTimeout",
            "phpunit"
        ]
    }
}
</code></pre>
<h2 id="allow-plugins"><a class="header" href="#allow-plugins">allow-plugins</a></h2>
<p>既定は<code>{}</code>で、1つもプラグインを読み込むことはできません。</p>
<p>Composer
2.2.0では、<code>allow-plugins</code>オプションによってセキュリティの層が追加され、Composerの実行中にどのComposerプラグインがコードを実行できるかを制限できるようになりました。</p>
<p>新しいプラグインが最初に活性化され、それが構成オプションにまだ挙げられていなければ、Composerは警告を印字します。
Composerを対話的に実行すると、プラグインを実行するかどうかを決めるようプロンプトを出します。</p>
<p>この設定を使うと、信頼できるパッケージのみがコードを実行できるようになります。
パッケージ名パターンをキーに持つオブジェクトに設定します。
値は、許可する場合は<strong>true</strong>で、許可しない場合は<strong>false</strong>です。
何れもこれ以外の警告とプロンプトは抑制されます。</p>
<pre><code class="language-json">{
    "config": {
        "allow-plugins": {
            "third-party/required-plugin": true,
            "my-organization/*": true,
            "unnecessary/plugin": false
        }
    }
}
</code></pre>
<p>構成オプション自体を<code>false</code>にして全てのプラグインを拒否したり、<code>true</code>にして全てのプロラグインが走るのを許可したり（全くお勧めしません）するようにも設定できます。
例えば以下の通りです。</p>
<pre><code class="language-json">{
    "config": {
        "allow-plugins": false
    }
}
</code></pre>
<h2 id="use-include-path"><a class="header" href="#use-include-path">use-include-path</a></h2>
<p>既定では<code>false</code>です。
<code>true</code>にすると、Composerの自動読み込み器はPHPのインクルードパスにあるクラスも探します。</p>
<h2 id="preferred-install"><a class="header" href="#preferred-install">preferred-install</a></h2>
<p>既定では<code>dist</code>で、<code>source</code>、<code>dist</code>、<code>auto</code>の何れかです。
このオプションではComposerが優先して使うインストール方法を設定できます。
お好みで、より柔軟なインストール設定のためにキーにパッケージ名のパターンがあるオブジェクトにすることもできます。</p>
<pre><code class="language-json">{
    "config": {
        "preferred-install": {
            "my-organization/stable-package": "dist",
            "my-organization/*": "source",
            "partner-organization/*": "auto",
            "*": "dist"
        }
    }
}
</code></pre>
<ul>
<li><code>source</code>は、Composerが（存在する場合）<code>source</code>からパッケージをインストールすることを意味します。
通常、git cloneまたは同等のパッケージが使用するバージョン管理システムのチェックアウトです。
プロジェクトにバグ修正を行い、依存関係のローカルgitクローンを直接取得する場合に便利です。</li>
<li><code>auto</code>は遺物的な動作です。
開発バージョンの場合にComposerは<code>source</code>を自動的に使用し、それ以外の場合は<code>dist</code>を使用します。</li>
<li><code>dist</code>（Composer 2.1以降で既定）は、可能であればComposerが<code>dist</code>からインストールすることを意味します。
通常、zipファイルのダウンロードであり、リポジトリ全体のクローンよりも高速です。</li>
</ul>
<blockquote>
<p><strong>補足：</strong> 順番は重要です。
より限定されたパターンは、より緩いパターンの前に来るべきです。
大域構成やパッケージ構成で文字列表記とハッシュ構成を混在させると、文字列表記は<code>*</code>パッケージパターンに解釈されます。</p>
</blockquote>
<h2 id="audit"><a class="header" href="#audit">audit</a></h2>
<p>セキュリティ監査の構成オプション</p>
<h3 id="ignore"><a class="header" href="#ignore">ignore</a></h3>
<p>勧告の識別子、リモートの識別子、CVEの識別子のリストです。
報告はされますが監査コマンドは通過させます。</p>
<pre><code class="language-json">{
    "config": {
        "audit": {
            "ignore": {
                "CVE-1234": "The affected component is not in use.",
                "GHSA-xx": "The security fix was applied as a patch.",
                "PKSA-yy": "Due to mitigations in place the update can be delayed."
            }
        }
    }
}
</code></pre>
<p>もしくは以下です。</p>
<pre><code class="language-json">{
    "config": {
        "audit": {
            "ignore": ["CVE-1234", "GHSA-xx", "PKSA-yy"]
        }
    }
}
</code></pre>
<h3 id="abandoned"><a class="header" href="#abandoned">abandoned</a></h3>
<p>Composer 2.6では<code>report</code>が既定値であり、Composer 2.7以降では<code>fail</code>が既定値です。
監査コマンドが放棄されたパッケージを報告するかどうかを定義するもので、3つの値を取り得ます。</p>
<ul>
<li><code>ignore</code>は、監査コマンドが放棄されたパッケージを全く考慮しないという意味です。</li>
<li><code>report</code>は、放棄されたパッケージが失敗として報告されるものの、非ゼロコードでコマンドが終了してしまわないようにする意味です。</li>
<li><code>fail</code>は、放棄されたパッケージにより監査が非ゼロコードで失敗するようになる意味です。</li>
</ul>
<pre><code class="language-json">{
    "config": {
        "audit": {
            "abandoned": "report"
        }
    }
}
</code></pre>
<p>Composer
2.7以降、<a href="03-cli.html#composer-audit-abandoned"><code>COMPOSER_AUDIT_ABANDONED</code></a>環境変数を介して、オプションをオーバーライドできます。</p>
<p>Composer
2.8以降、<a href="03-cli.html#audit"><code>--abandoned</code></a>コマンドラインオプションを介して、オプションをオーバーライドできます。
このオプションにより、構成値と環境変数が共にオーバーライドされます。</p>
<h2 id="use-parent-dir"><a class="header" href="#use-parent-dir">use-parent-dir</a></h2>
<p>composer.jsonがないディレクトリでComposerを実行しており、その上のディレクトリにcomposer.jsonがある場合、Composerは既定で、そのディレクトリのcomposer.jsonを代わりに使用するかどうかを尋ねます。</p>
<p>このプロンプトに対して常に「はい」と答えたい場合は、この構成値を<code>true</code>に設定できます。
プロンプトが表示されないようにするには、<code>false</code>に設定します。
既定は<code>"prompt"</code>です。</p>
<blockquote>
<p><strong>補足：</strong> この構成を機能させるには、大域的な利用者全体の構成で設定しなければなりません。
例えば<code>php composer.phar config --global use-parent-dir true</code>を使用して設定します。</p>
</blockquote>
<h2 id="store-auths"><a class="header" href="#store-auths">store-auths</a></h2>
<p>認証のプロンプトの後にする動作です。
<code>true</code>（常に保存する）、<code>false</code>（保存しない）、<code>"prompt"</code>（毎回確認する）の何れか1つで、既定では<code>"prompt"</code>です。</p>
<h2 id="github-protocols"><a class="header" href="#github-protocols">github-protocols</a></h2>
<p>既定では<code>["https", "ssh", "git"]</code>です。
github.comからクローンを作成するときに使用するプロトコルのリストで、優先度順に並べます。
既定では<code>git</code>が存在しますが、gitプロトコルは暗号化されていないため、<a href="#secure-http">secure-http</a>が無効になっている場合のみ使われます。
originのリモートプッシュURLでssh (<code>git@github.com:...</code>)
ではなくhttpsを使用する場合、プロトコルリストを<code>["https"]</code>のみに設定すると、ComposerはプッシュURLをSSHのURLに上書きすることを取り止めます。</p>
<h2 id="github-oauth"><a class="header" href="#github-oauth">github-oauth</a></h2>
<p>ドメイン名とoauthキーのリストです。
たとえば、このオプションの値として<code>{"github.com": "oauthtoken"}</code>を使用すると、<code>oauthtoken</code>を使用してgithubの私有リポジトリにアクセスし、APIのIPに基づく低いレート制限を回避します。
Composerは、必要に応じて資格情報を要求する場合がありますが、これらは手動で設定することもできます。
GitHubのOAuthトークンを取得する方法及びcliの構文の詳細については、<a href="articles/authentication-for-private-packages.html#github-oauth">こちら</a>を参照してください。</p>
<h2 id="gitlab-domains"><a class="header" href="#gitlab-domains">gitlab-domains</a></h2>
<p>既定では<code>["gitlab.com"]</code>です。
GitLabサーバーのドメインのリストです。
<code>gitlab</code>リポジトリ種別を使う場合に使用されます。</p>
<h2 id="gitlab-oauth"><a class="header" href="#gitlab-oauth">gitlab-oauth</a></h2>
<p>ドメイン名とoauthキーのリストです。
たとえば、このオプションの値として<code>{"gitlab.com": "oauthtoken"}</code>を使用すると、<code>oauthtoken</code>を使用してgitlabの私有リポジトリにアクセスします。
なお、パッケージがgitlab.comでホストされていない場合、ドメイン名も<a href="06-config.html#gitlab-domains"><code>gitlab-domains</code></a>オプションで指定する必要があります。
詳細情報は<a href="articles/authentication-for-private-packages.html#gitlab-oauth">こちら</a>にもあります。</p>
<h2 id="gitlab-token"><a class="header" href="#gitlab-token">gitlab-token</a></h2>
<p>ドメイン名と私有トークンのリストです。
私有トークンは、単純な文字列、または利用者名とトークンを含む配列の何れかです。
たとえば、このオプションの値として<code>{"gitlab.com": "privatetoken"}</code>を使用すると、<code>privatetoken</code>を使用してgitlabの私有リポジトリにアクセスします。
<code>{"gitlab.com": {"username": "gitlabuser", "token": "privatetoken"}}</code>を使用すると、利用者名とトークンの両方を使ってgitlabのデプロイトークン機能 (https://docs.gitlab.com/ ee/user/project/deploy_tokens/) を使用します。
なお、パッケージがgitlab.comでホストされていない場合、ドメイン名も<a href="06-config.html#gitlab-domains"><code>gitlab-domains</code></a>オプションで指定する必要があります。
トークンには<code>api</code>または<code>read_api</code>スコープが必要です。
詳細情報は<a href="articles/authentication-for-private-packages.html#gitlab-token">こちら</a>にもあります。</p>
<h2 id="gitlab-protocol"><a class="header" href="#gitlab-protocol">gitlab-protocol</a></h2>
<p>パッケージメタデータの<code>source</code>値用にリポジトリのURLを作成するときに、強制的に使用するプロトコルです。
<code>git</code>または<code>http</code>の何れかです（<code>https</code>は<code>http</code>の同義語として扱われます）。
HTTPベーシック認証を使った<a href="https://docs.gitlab.com/ee/ci/variables/predefined_variables.html#predefined-variables-reference">GitLabのCI_JOB_TOKEN</a>により、後々GitLab
CIのジョブでクローンされる私有リポジトリを参照するプロジェクトを扱う際に役立ちます。
既定では、Composerは私有リポジトリについてはgit-over-SSHのURLを生成し、公開リポジトリについてはHTTP(S)のみを生成します。</p>
<h2 id="disable-tls"><a class="header" href="#disable-tls">disable-tls</a></h2>
<p>既定は<code>false</code>です。
真に設定すると、すべてのHTTPSのURLが代わりにHTTPで試行され、ネットワークレベルの暗号化は実行されません。
これを有効にすることはセキュリティ上の危険性であり、全く推奨されません。
より良い方法は、php.iniでphp_openssl拡張機能を有効にすることです。
これを有効にすると、<code>secure-http</code>オプションが暗黙に無効になります。</p>
<h2 id="secure-http"><a class="header" href="#secure-http">secure-http</a></h2>
<p>既定では<code>true</code>です。
真に設定すると、HTTPSのURLのみがComposer経由でダウンロードできるようになります。
何かしらへのHTTPアクセスが絶対に必要な場合は無効にできますが、<a href="https://letsencrypt.org/">Let's
Encrypt</a>を使用して無料のSSL証明書を取得する方が一般的にはより良い代替手段です。</p>
<h2 id="bitbucket-oauth"><a class="header" href="#bitbucket-oauth">bitbucket-oauth</a></h2>
<p>ドメイン名と消費者のリストです。
例えば<code>{"bitbucket.org": {"consumer-key": "myKey", "consumer-secret": "mySecret"}}</code>のように使います。
より詳しくは<a href="articles/authentication-for-private-packages.html#bitbucket-oauth">こちら</a>を読んでください。</p>
<h2 id="cafile"><a class="header" href="#cafile">cafile</a></h2>
<p>ローカルファイルシステム上の認証局ファイルの配置場所です。
PHP 5.6以降ではシステムCAファイルを自動的に検出できますが、PHP
5.6以降でも、php.iniのopenssl.cafileを介してこれを設定すべきです。</p>
<h2 id="capath"><a class="header" href="#capath">capath</a></h2>
<p>cafileが指定されていない場合、またはそこに証明書がない場合は、capathが指すディレクトリで適切な証明書が探索されます。
capathは正しくハッシュされた証明書ディレクトリでなければなりません。</p>
<h2 id="http-basic"><a class="header" href="#http-basic">http-basic</a></h2>
<p>認証するためのドメイン名と、利用者名とパスワードのリストです。
たとえば、このオプションの値として<code>{"example.org": {"username": "alice", "password": "foo"}}</code>を使用すると、Composerはexample.orgに対して認証します。
詳細については、<a href="articles/authentication-for-private-packages.html#http-basic">こちら</a>を参照してください。</p>
<h2 id="bearer"><a class="header" href="#bearer">bearer</a></h2>
<p>認証するドメイン名とトークンのリストです。
たとえば、このオプションの値として<code>{"example.org": "foo"}</code>を使用すると、Composerは<code>Authorization: Bearer foo</code>ヘッダーを使用して、example.orgに対して認証を行うことができます。</p>
<h2 id="platform"><a class="header" href="#platform">platform</a></h2>
<p>プラットフォームパッケージ（PHP及び拡張機能）を偽装して、運用環境をエミュレートしたり、構成で対象のプラットフォームを定義したりできるようにします。
例えば<code>{"php": "7.0.3", "ext-something": "4.0.3"}</code>です。</p>
<p>これにより、ローカルで実行する実際のPHPバージョンに関係なく、PHP 7.0.3以上を必要とするパッケージをインストールできなくなります。
ただし、依存関係が正しく検査されなくなったことも意味します。
PHP 5.6を実行すると、7.0.3を想定しているため問題なくインストールされますが、実行時に失敗します。
これは、<code>{"php":"7.4"}</code>が指定されることも意味します。
<code>7.4.1</code>を最小のバージョンとして定義するパッケージは使用されません。</p>
<p>したがって、これを使用する場合は、デプロイ戦略の一部として<a href="03-cli.html#check-platform-reqs"><code>check-platform-reqs</code></a>コマンドも走らせることをお勧めしますし、より安全です。</p>
<p>ローカルにインストールしていない拡張機能が依存関係に必要な場合は、代わりに<code>--ignore-platform-req=ext-foo</code>を<code>update</code>、<code>install</code>、または<code>require</code>に渡して無視できます。
しかし長い目で見れば、今は無視するにせよ必要な拡張はインストールすべきで、1箇月後に新しいパッケージでも必要になると、知らず知らずのうちに本番環境に問題が発生する可能性があります。</p>
<p>拡張をローカルにインストールしているが本番環境では<em>そうではない</em>場合、<code>{"ext-foo": false}</code>を使ってComposerから意図的に隠すこともできます。</p>
<h2 id="vendor-dir"><a class="header" href="#vendor-dir">vendor-dir</a></h2>
<p>既定は<code>vendor</code>です。
お好みで違うディレクトリに依存関係をインストールできます。
vendor-dirと以下の全ての<code>*-dir</code>オプション中では、<code>$HOME</code>と<code>~</code>はホームディレクトリに置換されます。</p>
<h2 id="bin-dir"><a class="header" href="#bin-dir">bin-dir</a></h2>
<p>既定では<code>vendor/bin</code>です。
プロジェクトがバイナリを含む場合、それらのバイナリはこのディレクトリにシンボリックリンクが張られます。</p>
<h2 id="data-dir"><a class="header" href="#data-dir">data-dir</a></h2>
<p>既定では、Windowsでは<code>C:\Users\&lt;user&gt;\AppData\Roaming\Composer</code>、XDG Base Directory Specificationsに従うunixシステムでは<code>$XDG_DATA_HOME/composer</code>、その他のunixシステムでは<code>$COMPOSER_HOME</code>です。
現在、過去のcomposer.pharファイルを保存して古いバージョンにロールバックできるようにするためにのみ使用されています。
<a href="03-cli.html#composer-home">COMPOSER_HOME</a>も参照してください。</p>
<h2 id="cache-dir"><a class="header" href="#cache-dir">cache-dir</a></h2>
<p>既定では、Windowsでは<code>C:\Users\&lt;user&gt;\AppData\Local\Composer</code>、macOSでは<code>/Users/&lt;user&gt;/Library/Caches/composer</code>、XDG Base Directory Specificationに従うunixシステムでは<code>$XDG_CACHE_HOME/composer</code>、他のunixシステムでは<code>$COMPOSER_HOME/cache</code>になります。
Composerで使う全てのキャッシュが保管されます。
<a href="03-cli.html#composer-home">COMPOSER_HOME</a>も参照してください。</p>
<h2 id="cache-files-dir"><a class="header" href="#cache-files-dir">cache-files-dir</a></h2>
<p>既定では<code>$cache-dir/files</code>です。
パッケージのzipアーカイブを保管します。</p>
<h2 id="cache-repo-dir"><a class="header" href="#cache-repo-dir">cache-repo-dir</a></h2>
<p>既定では<code>$cache-dir/repo</code>です。
<code>composer</code>の種別用のリポジトリのメタデータと、<code>svn</code>、<code>fossil</code>、<code>github</code>、<code>gitbucket</code>の種別のVCSリポジトリを保管します。</p>
<h2 id="cache-vcs-dir"><a class="header" href="#cache-vcs-dir">cache-vcs-dir</a></h2>
<p>既定では<code>$cache-dir/vcs</code>です。
<code>git</code>及び<code>hg</code>の種別用のVCSリポジトリメタデータを読み込むためのVCSクローンを保管し、インストールを高速にします。</p>
<h2 id="cache-files-ttl"><a class="header" href="#cache-files-ttl">cache-files-ttl</a></h2>
<p>既定では<code>15552000</code>（6箇月）です。
Composerはダウンロードした全てのdist（zip、tar、……）をキャッシュします。
既定では使われていないものについて6箇月経った後に削除します。
このオプションはこの期間を（秒数で）調整ないし0に設定することで、完全に無効にできるようにするものです。</p>
<h2 id="cache-files-maxsize"><a class="header" href="#cache-files-maxsize">cache-files-maxsize</a></h2>
<p>既定では<code>300MiB</code>です。
Composerはダウンロードした全ての配布パッケージ（zip、tar、……）をキャッシュします。
ガベージコレクションが定期的に走っている場合、キャッシュで使える最大量です。
最後のキャッシュヒットから時間が経った（比較的使われていない）ファイルが削除されます。</p>
<h2 id="cache-read-only"><a class="header" href="#cache-read-only">cache-read-only</a></h2>
<p>既定では<code>false</code>です。
Composerのキャッシュを読取専用モードで使うかどうかを決めます。</p>
<h2 id="bin-compat"><a class="header" href="#bin-compat">bin-compat</a></h2>
<p>既定では<code>auto</code>です。
インストールするバイナリの互換性を決定します。
<code>auto</code>の場合、Composerは、WindowsまたはWSLの場合に.batプロキシファイルのみをインストールします。
<code>full</code>に設定すると、Windows用の.batファイルとUnixベースのオペレーティングシステム用のスクリプトの両方がバイナリごとにインストールされます。
主にLinux VM内でComposerを実行しているが、WindowsホストOSで使用できる<code>.bat</code>プロキシが必要な場合に役立ちます。
<code>proxy</code>に設定すると、ComposerはbashでUnixスタイルのプロキシファイルのみを作成し、WindowsないしWSLでも.batファイルを作成しません。</p>
<h2 id="prepend-autoloader"><a class="header" href="#prepend-autoloader">prepend-autoloader</a></h2>
<p>既定は<code>true</code>です。
<code>false</code>にするとComposerの自動読み込み器は既存の自動読み込み器の前に置かれなくなります。
他の自動読み込み器との相互運用性の問題を修正する際に必要になることがあります。</p>
<h2 id="autoloader-suffix"><a class="header" href="#autoloader-suffix">autoloader-suffix</a></h2>
<p>既定では<code>null</code>です。
空でない文字列に設定した場合、生成されたComposerの自動読み込み器の接尾辞に使われます。
<code>null</code>に設定された場合、可能であれば<code>composer.lock</code>ファイルの<code>content-hash</code>値が使われます。
そうでなければ、乱択された接尾辞が生成されます。</p>
<h2 id="optimize-autoloader"><a class="header" href="#optimize-autoloader">optimize-autoloader</a></h2>
<p>既定では<code>false</code>です。
<code>true</code>の場合、自動読み込み器を吐き出す際に常に最適化されます。</p>
<h2 id="sort-packages"><a class="header" href="#sort-packages">sort-packages</a></h2>
<p>既定では<code>false</code>です。
<code>true</code>の場合、新しいパッケージを追加したときに<code>composer.json</code>中の<code>require</code>コマンドでパッケージが名前順に整列された状態に保たれます。</p>
<h2 id="classmap-authoritative"><a class="header" href="#classmap-authoritative">classmap-authoritative</a></h2>
<p>既定では<code>false</code>です。
<code>true</code>にするとComposerの自動読み込み器はクラスマップからのクラスのみを読み込みます。
暗に<code>optimize-autoloader</code>を有効にします。</p>
<h2 id="apcu-autoloader"><a class="header" href="#apcu-autoloader">apcu-autoloader</a></h2>
<p>既定では<code>false</code>です。
<code>true</code>の場合、Composerの自動読み込み器はAPCuを確認し、拡張が有効になった場合にクラスの有無をキャッシュするのに使います。</p>
<h2 id="github-domains"><a class="header" href="#github-domains">github-domains</a></h2>
<p>既定では<code>["github.com"]</code>です。
githubモードで使われるドメインのリストです。
GitHub Enterpriseの準備で使われます。</p>
<h2 id="github-expose-hostname"><a class="header" href="#github-expose-hostname">github-expose-hostname</a></h2>
<p>既定では<code>true</code>です。
<code>false</code>にするとgithub APIにアクセスするために作られるOAuthトークンがマシンのホスト名ではなく日付になります。</p>
<h2 id="use-github-api"><a class="header" href="#use-github-api">use-github-api</a></h2>
<p>既定では<code>true</code>です。
特定のリポジトリに於ける<code>no-api</code>キーに似ており、<code>use-github-api</code>を<code>false</code>に設定すると、他のgitリポジトリのように、全てのGitHubリポジトリについて、GitHub
APIを使う代わりにリポジトリをクローンするように大域的な挙動を定義します。
しかし<code>git</code>ドライバを直接使うのではなく、ComposerはやはりGitHubのzipファイルを使うことを試みます。</p>
<h2 id="notify-on-install"><a class="header" href="#notify-on-install">notify-on-install</a></h2>
<p>既定では<code>true</code>です。
Composerではリポジトリが通知のURLを定義できるようにしており、そのリポジトリからパッケージがインストールされたことの通知を受けられます。
このオプションはその挙動を無効にできます。</p>
<h2 id="discard-changes"><a class="header" href="#discard-changes">discard-changes</a></h2>
<p>既定では<code>false</code>で、<code>true</code>、<code>false</code>、または<code>stash</code>の何れかにできます。
このオプションでは非対話モードでダーティアップデートを制御する既定の方式を設定できます。
<code>true</code>はベンダーの変更を常に破棄しますが、<code>"stash"</code>は取っておいて再適用しようとします。
よくベンダーを変更する場合は、CIサーバーやデプロイスクリプトにこれを使ってください。</p>
<h2 id="archive-format"><a class="header" href="#archive-format">archive-format</a></h2>
<p>既定では<code>tar</code>です。
archiveコマンドにより使われる既定の形式を上書きします。</p>
<h2 id="archive-dir"><a class="header" href="#archive-dir">archive-dir</a></h2>
<p>既定では<code>.</code>です。
archiveコマンドによる作られる、アーカイブの既定の対象パスです。</p>
<p>例：</p>
<pre><code class="language-json">{
    "config": {
        "archive-dir": "/home/user/.composer/repo"
    }
}
</code></pre>
<h2 id="htaccess-protect"><a class="header" href="#htaccess-protect">htaccess-protect</a></h2>
<p>既定では<code>true</code>です。
<code>false</code>に設定すると、ComposerはComposerのホーム、キャッシュ、データディレクトリに<code>.htaccess</code>ファイルを作りません。</p>
<h2 id="lock"><a class="header" href="#lock">lock</a></h2>
<p>既定では<code>true</code>です。
<code>false</code>に設定すると、Composerは<code>composer.lock</code>ファイルを作らず、存在している場合は無視します。</p>
<h2 id="platform-check"><a class="header" href="#platform-check">platform-check</a></h2>
<p>既定では、PHPのバージョンのみをチェックする<code>php-only</code>に設定されています。
拡張子の存在も確認するには、<code>true</code>に設定します。
<code>false</code>に設定すると、Composerは自動読み込み器のブートストラップの一部として<code>platform_check.php</code>ファイルを作成せず、requireもしません。</p>
<h2 id="secure-svn-domains"><a class="header" href="#secure-svn-domains">secure-svn-domains</a></h2>
<p>既定では<code>[]</code>です。
安全なSubversionまたはSVNの移送を使用しているものとして信頼し、印を付けるべきドメインの一覧です。
既定では、svn://プロトコルは安全ではないと見なされ、throwされますが、この構成オプションを<code>["example.org"]</code>に設定すれば、そのホスト名でsvnのURLを使用できます。
<code>secure-http</code>を完全に無効にするよりも優れた安全な代替手段です。</p>
<h2 id="bump-after-update"><a class="header" href="#bump-after-update">bump-after-update</a></h2>
<p>既定は<code>false</code>で、<code>true</code>、<code>false</code>、<code>"dev"</code>、<code>"no-dev"</code>のどれかにできます。
真に設定すると、Composerは<code>update</code>コマンドを走らせた後に、<code>bump</code>コマンドを走らせます。
<code>"dev"</code>や<code>"no-dev"</code>に設定すると、対応する依存関係のみのバージョンが上がります。</p>
<h2 id="allow-missing-requirements"><a class="header" href="#allow-missing-requirements">allow-missing-requirements</a></h2>
<p>既定は<code>false</code>です。
要件から何か欠けているものがあるとき、<code>install</code>時にエラーを無視します。
状況としては、<code>composer.json</code>にある最新の変更点に対して、固定ファイルが最新でないときです。</p>
<p>← <a href="05-repositories.html">リポジトリ</a>  | <a href="07-runtime.html">実行時</a> →</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../doc/05-repositories.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../doc/07-runtime.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../doc/05-repositories.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../doc/07-runtime.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
